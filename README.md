# Obsidian Image OCR Plugin

> English: This plugin provides OCR (Optical Character Recognition) for images in Obsidian. Right-click on any image to extract text using Alibaba Cloud OCR API. Supports various working modes and elegant result display.

# Obsidian Image OCR æ’ä»¶

å›¾ç‰‡ OCR æ–‡å­—è¯†åˆ«æ’ä»¶ï¼Œåœ¨ Obsidian ä¸­å³é”®ç‚¹å‡»å›¾ç‰‡å³å¯è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—ï¼Œæ”¯æŒå¤šç§å·¥ä½œæ¨¡å¼å’Œä¼˜é›…çš„ç»“æœå±•ç¤ºã€‚

![æ’ä»¶é¢„è§ˆ](https://example.com/preview.png)

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- **ä¾¿æ·è¯†åˆ«**ï¼šåœ¨ Obsidian ä¸­å³é”®ç‚¹å‡»å›¾ç‰‡ï¼Œå¿«é€Ÿè¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—
- **å¤šæ¨¡å¼æ”¯æŒ**ï¼š
  - é˜…è¯»æ¨¡å¼ (Reading Mode)
  - ç¼–è¾‘æ¨¡å¼ (Live Preview)
  - æºç æ¨¡å¼ (Source Mode) ä¸‹è¯†åˆ« Markdown å›¾ç‰‡è¯­æ³•
  - é™„ä»¶ç®¡ç†å™¨ä¸­å³é”®å›¾ç‰‡æ–‡ä»¶
- **é«˜è´¨é‡è¯†åˆ«**ï¼šä½¿ç”¨é˜¿é‡Œäº‘ OCR API è¿›è¡Œè¯†åˆ«ï¼Œè¯†åˆ«é€Ÿåº¦å¿«ï¼Œå‡†ç¡®ç‡é«˜
- **ä¼˜é›…å±•ç¤º**ï¼š
  - è¯†åˆ«ç»“æœä»¥ç¾è§‚çš„æ¨¡æ€çª—å£å‘ˆç°
  - æ”¯æŒå®æ—¶ç¼–è¾‘å¹¶æä¾›å­—ç¬¦/è¯æ•°ç»Ÿè®¡
  - å¯ç›´æ¥å¤åˆ¶æ–‡æœ¬æˆ–åˆ›å»ºä¸ºæ–°ç¬”è®°
  - æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆï¼Œæ”¯æŒç‚¹å‡»æŸ¥çœ‹åŸå›¾
- **çµæ´»é…ç½®**ï¼šæ”¯æŒé…ç½®å¤šç§ OCR æœåŠ¡åŠå…¶å‚æ•°

## ğŸ“¥ å®‰è£…

### ä» Obsidian ç¤¾åŒºæ’ä»¶åº“å®‰è£…

1. æ‰“å¼€ Obsidian è®¾ç½®
2. ç‚¹å‡» "ç¤¾åŒºæ’ä»¶" > "æµè§ˆ"
3. æœç´¢ "Image OCR"
4. å®‰è£…å¹¶å¯ç”¨æ’ä»¶

### æ‰‹åŠ¨å®‰è£…

1. ä¸‹è½½æœ€æ–°çš„ release æ–‡ä»¶
2. è§£å‹ç¼©åï¼Œå°†æ–‡ä»¶å¤¹å¤åˆ¶åˆ° Obsidian æ’ä»¶ç›®å½•ï¼ˆ`.obsidian/plugins/obsidian-image-ocr/`ï¼‰
3. åœ¨ Obsidian è®¾ç½®ä¸­å¯ç”¨æ’ä»¶

## ğŸ”§ é…ç½®

é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œéœ€è¦é…ç½®é˜¿é‡Œäº‘ OCR API çš„è®¿é—®å‡­è¯ï¼š

1. åœ¨æ’ä»¶è®¾ç½®ä¸­å¡«å†™é˜¿é‡Œäº‘ AccessKey å’Œ AccessSecret
   ```
   AccessKey: æ‚¨çš„é˜¿é‡Œäº‘AccessKey
   AccessSecret: æ‚¨çš„é˜¿é‡Œäº‘AccessSecret
   ```

2. æˆ–è€…åœ¨ Obsidian åº“æ ¹ç›®å½•ä¸‹çš„ `.env` æ–‡ä»¶ä¸­è®¾ç½®ï¼š
   ```env
   ALI_AK=æ‚¨çš„é˜¿é‡Œäº‘AccessKey
   ALI_SK=æ‚¨çš„é˜¿é‡Œäº‘AccessSecret
   ```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

1. **è¯†åˆ«å›¾ç‰‡æ–‡å­—**ï¼š
   - åœ¨ Obsidian ä¸­å³é”®ç‚¹å‡»ä»»æ„å›¾ç‰‡
   - é€‰æ‹© "OCR è¯†åˆ«å›¾ç‰‡æ–‡å­—" èœå•é¡¹
   - ç­‰å¾…è¯†åˆ«å®Œæˆï¼Œç»“æœä¼šæ˜¾ç¤ºåœ¨å¼¹å‡ºçª—å£ä¸­

2. **ç»“æœæ“ä½œ**ï¼š
   - ç›´æ¥ç¼–è¾‘è¯†åˆ«æ–‡æœ¬ï¼ˆè‡ªåŠ¨æ˜¾ç¤ºå­—ç¬¦æ•°å’Œè¯æ•°ï¼‰
   - ç‚¹å‡»"å¤åˆ¶æ–‡æœ¬"å°†å½“å‰ç¼–è¾‘çš„æ–‡æœ¬å¤åˆ¶åˆ°å‰ªè´´æ¿
   - ç‚¹å‡»"åˆ›å»ºä¸ºæ–°ç¬”è®°"å°†ç»“æœä¿å­˜ä¸ºç‹¬ç«‹çš„ç¬”è®°æ–‡ä»¶
   - ç‚¹å‡»çª—å£ä¸Šæ–¹çš„è·¯å¾„å³ä¾§å¤åˆ¶æŒ‰é’®å¯å¤åˆ¶å›¾ç‰‡è·¯å¾„
   - ç‚¹å‡»å›¾ç‰‡é¢„è§ˆå¯åœ¨æ–°çª—å£æŸ¥çœ‹åŸå›¾

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

- åœ¨æºç æ¨¡å¼ä¸‹ï¼Œå°†å…‰æ ‡æ”¾åœ¨å›¾ç‰‡ Markdown è¯­æ³•ä¸Šï¼ˆå¦‚ `![](image.png)`ï¼‰å³å¯ä½¿ç”¨å³é”®èœå•
- è¯†åˆ«é•¿ç¯‡æ–‡æœ¬æ—¶ï¼Œå¯è‡ªç”±è°ƒæ•´æ–‡æœ¬åŒºåŸŸå¤§å°
- è¯†åˆ«ç½‘ç»œå›¾ç‰‡æ—¶ï¼Œéœ€ç¡®ä¿å›¾ç‰‡ URL å¯ç›´æ¥è®¿é—®

## ğŸŒŸ æ”¯æŒçš„å›¾ç‰‡æ¥æº

- Obsidian åº“ä¸­çš„æœ¬åœ°å›¾ç‰‡æ–‡ä»¶
- é™„ä»¶æ–‡ä»¶å¤¹ä¸­çš„å›¾ç‰‡
- ç½‘ç»œå›¾ç‰‡ï¼ˆHTTP/HTTPS URLï¼‰
- å‰ªè´´æ¿ç²˜è´´çš„å›¾ç‰‡ï¼ˆé€šè¿‡ Markdown é“¾æ¥ï¼‰

## âš ï¸ æ³¨æ„äº‹é¡¹

- ä½¿ç”¨å‰éœ€è¦è®¾ç½®é˜¿é‡Œäº‘ OCR API çš„ AccessKey å’Œ Secret
- æœ¬æ’ä»¶éœ€è¦è”ç½‘ä½¿ç”¨ï¼Œè¯†åˆ«é€Ÿåº¦å—ç½‘ç»œçŠ¶å†µå½±å“
- é˜¿é‡Œäº‘ OCR API å¯èƒ½æœ‰ä½¿ç”¨é™åˆ¶å’Œæ”¶è´¹æ ‡å‡†ï¼Œè¯·å‚è€ƒé˜¿é‡Œäº‘å®˜æ–¹æ–‡æ¡£
- å¦‚åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—æˆ–æäº¤ issue

## ğŸ“ æ›´æ–°æ—¥å¿—

### 1.0.4 (2024-04-15)
- æ­£å¼å‘å¸ƒåˆ°Obsidianå®˜æ–¹æ’ä»¶åº“
- ä¼˜åŒ–æ„å»ºæµç¨‹
- ä¿®å¤äº†ä¸€äº›é—®é¢˜

### 0.1.0 (2023-04-15)
- æ–°å¢æ›´ç¾è§‚çš„ OCR ç»“æœå±•ç¤ºçª—å£
- æ·»åŠ å®æ—¶å­—ç¬¦ç»Ÿè®¡åŠŸèƒ½
- æ”¯æŒå›¾ç‰‡é¢„è§ˆå’Œè·¯å¾„å¤åˆ¶
- æ”¹è¿› UI/UX è®¾è®¡ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

### 0.0.1 (2023-04-15)
- é¦–æ¬¡å‘å¸ƒ
- æ”¯æŒå¤šç§æ¨¡å¼ä¸‹çš„å›¾ç‰‡ OCR è¯†åˆ«
- åŸºç¡€ç»“æœå±•ç¤ºå’Œå¤åˆ¶åŠŸèƒ½

## ğŸ’» å¼€å‘è€…è¯´æ˜

### è‡ªåŠ¨åŒ–ç‰ˆæœ¬å‘å¸ƒæµç¨‹

æœ¬é¡¹ç›®è®¾ç½®äº†ä¾¿æ·çš„è‡ªåŠ¨åŒ–ç‰ˆæœ¬å‘å¸ƒæµç¨‹ï¼Œéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼š

1. **ç‰ˆæœ¬è„šæœ¬é…ç½®**ï¼š
   æˆ‘ä»¬åœ¨`package.json`ä¸­æ·»åŠ äº†ä»¥ä¸‹è„šæœ¬:
   ```json
   {
     "scripts": {
       "release:patch": "pnpm version patch && npm run release:post",
       "release:minor": "pnpm version minor && npm run release:post",
       "release:major": "pnpm version major && npm run release:post",
       "release:post": "git push && git push origin $(git describe --tags --abbrev=0)"
     }
   }
   ```

2. **ä¸€é”®å‘å¸ƒå‘½ä»¤**ï¼š
   - å‘å¸ƒè¡¥ä¸ç‰ˆæœ¬ (ä¾‹å¦‚ 1.0.4 â†’ 1.0.5): `pnpm run release:patch`
   - å‘å¸ƒæ¬¡è¦ç‰ˆæœ¬ (ä¾‹å¦‚ 1.0.4 â†’ 1.1.0): `pnpm run release:minor`
   - å‘å¸ƒä¸»è¦ç‰ˆæœ¬ (ä¾‹å¦‚ 1.0.4 â†’ 2.0.0): `pnpm run release:major`

3. **è‡ªåŠ¨åŒæ­¥çš„æ–‡ä»¶**ï¼š
   å½“è¿è¡Œä¸Šè¿°å‘½ä»¤æ—¶ï¼Œä»¥ä¸‹æ–‡ä»¶ä¼šè‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·ï¼š
   - `package.json`ï¼šé€šè¿‡pnpmè‡ªåŠ¨æ›´æ–°
   - `manifest.json`ï¼šé€šè¿‡version-bump.mjsè„šæœ¬æ›´æ–°
   - `versions.json`ï¼šé€šè¿‡version-bump.mjsè„šæœ¬æ›´æ–°

4. **å·¥ä½œåŸç†**ï¼š
   - å½“æ‰§è¡Œç‰ˆæœ¬æ›´æ–°å‘½ä»¤æ—¶ï¼Œ`pnpm version`ä¼šæ›´æ–°package.jsonå¹¶åˆ›å»ºgit commitå’Œtag
   - ç„¶åè§¦å‘`version`è„šæœ¬è¿è¡Œ`version-bump.mjs`
   - è¯¥è„šæœ¬è‡ªåŠ¨æ›´æ–°manifest.jsonå’Œversions.jsonä¸­çš„ç‰ˆæœ¬ä¿¡æ¯
   - æœ€åï¼Œæ‰€æœ‰æ›´æ”¹å’Œæ–°æ ‡ç­¾è¢«æ¨é€åˆ°GitHubï¼Œè§¦å‘GitHub Actionså·¥ä½œæµ
   - GitHub Actionsè‡ªåŠ¨æ„å»ºé¡¹ç›®å¹¶åˆ›å»ºæ–°çš„å‘å¸ƒç‰ˆæœ¬

5. **å¥½å¤„**ï¼š
   - å‡å°‘æ‰‹åŠ¨é”™è¯¯ï¼Œç¡®ä¿æ‰€æœ‰æ–‡ä»¶ç‰ˆæœ¬ä¸€è‡´
   - è‡ªåŠ¨åˆ›å»ºæ ‡ç­¾å’Œå‘å¸ƒï¼Œç®€åŒ–å‘å¸ƒæµç¨‹
   - éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼Œä¿æŒç‰ˆæœ¬ç®¡ç†çš„ä¸€è‡´æ€§

### å‘å¸ƒæ’ä»¶åˆ°Obsidianå®˜æ–¹å¸‚åœº

å¦‚æœä½ æƒ³å‚ä¸è´¡çŒ®æˆ–è€…äº†è§£å¦‚ä½•å°†æ­¤ç±»æ’ä»¶å‘å¸ƒåˆ°Obsidianå®˜æ–¹å¸‚åœºï¼Œä»¥ä¸‹æ˜¯å®Œæ•´æµç¨‹ï¼š

1. **å‡†å¤‡å¿…è¦æ–‡ä»¶**ï¼š
   - `manifest.json`ï¼šæ’ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼Œç¡®ä¿ç‰ˆæœ¬å·éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ
   - `main.js`ï¼šç¼–è¯‘åçš„æ’ä»¶ä¸»æ–‡ä»¶
   - `styles.css`ï¼ˆå¯é€‰ï¼‰ï¼šå¦‚æœæ’ä»¶æœ‰è‡ªå®šä¹‰æ ·å¼
   - `README.md`ï¼šæ’ä»¶è¯´æ˜æ–‡æ¡£
   - `LICENSE`ï¼šå¼€æºè®¸å¯è¯æ–‡ä»¶ï¼ˆå¦‚MITï¼‰

2. **è®¾ç½®GitHubä»“åº“**ï¼š
   - ç¡®ä¿ä»£ç æ‰˜ç®¡åœ¨GitHubä¸Š
   - è®¾ç½®é€‚å½“çš„.gitignoreï¼Œæ’é™¤node_moduleså’Œæ„å»ºäº§ç‰©

3. **é…ç½®GitHub Actionsè‡ªåŠ¨å‘å¸ƒ**ï¼š
   ```yaml
   name: Release Obsidian plugin
   
   on:
     push:
       tags: ["*"]
   
   permissions:
     contents: write
   
   jobs:
     build:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v3
         - uses: actions/setup-node@v3
           with:
             node-version: "18.x"
         - uses: pnpm/action-setup@v2
           with:
             version: 8
         - name: Install dependencies
           run: pnpm install
         - name: Build plugin
           run: pnpm run build
         - name: Create release
           env:
             GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
           run: |
             tag="${GITHUB_REF#refs/tags/}"
             gh release create "$tag" \
               --title "$tag" \
               --notes "Release $tag of the plugin." \
               dist/main.js dist/manifest.json
   ```

4. **åˆ›å»ºå‘å¸ƒç‰ˆæœ¬**ï¼š
   - ç¡®ä¿manifest.jsonä¸­çš„ç‰ˆæœ¬å·ä¸GitHubæ ‡ç­¾ä¸€è‡´
   - æ¨é€ä¸€ä¸ªä¸ç‰ˆæœ¬å·ç›¸åŒçš„æ ‡ç­¾ï¼Œå¦‚`git tag -a 1.0.4 -m "Release 1.0.4"`å’Œ`git push origin 1.0.4`
   - GitHub Actionså°†è‡ªåŠ¨æ„å»ºå¹¶åˆ›å»ºå‘å¸ƒç‰ˆæœ¬

5. **æäº¤åˆ°Obsidianå®˜æ–¹æ’ä»¶åº“**ï¼š
   - Fork [obsidian-releases](https://github.com/obsidianmd/obsidian-releases) ä»“åº“
   - åœ¨`community-plugins.json`æ–‡ä»¶æœ«å°¾æ·»åŠ æ’ä»¶ä¿¡æ¯ï¼š
     ```json
     {
       "id": "obsidian-image-ocr",
       "name": "Image OCR",
       "author": "markshawn2020",
       "description": "OCR for images via right-click menu using Alibaba Cloud OCR API",
       "repo": "MarkShawn2020/obsidian-plugin-image-ocr"
     }
     ```
   - åˆ›å»ºPRï¼Œæ ‡é¢˜æ ¼å¼ä¸º"Add plugin: Image OCR"
   - å®ŒæˆPRæ¨¡æ¿ä¸­çš„æ‰€æœ‰æ£€æŸ¥é¡¹
   - ç­‰å¾…Obsidianå›¢é˜Ÿå®¡æ ¸

6. **æ’ä»¶è·å¾—æ‰¹å‡†å**ï¼š
   - åœ¨Obsidianè®ºå›çš„[Share & showcase](https://forum.obsidian.md/c/share-showcase/9)ç‰ˆå—å®£å¸ƒ
   - åœ¨Discordçš„`#updates`é¢‘é“å®£å¸ƒï¼ˆéœ€è¦å¼€å‘è€…è§’è‰²ï¼‰

## ğŸ“„ è®¸å¯è¯

MIT 